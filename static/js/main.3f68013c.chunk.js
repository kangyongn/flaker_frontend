(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{190:function(e,t,n){e.exports=n(340)},195:function(e,t,n){},340:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(42),c=n.n(i),l=(n(195),n(20)),o=n(21),u=n(23),s=n(22),p=n(24),d=n(14),h=n(52),m=n(45),f=function(e){return{type:"SAVE_USER_TO_STATE",payload:e}},E=function(e){return{type:"SAVE_TOKEN_TO_STATE",payload:e}},b=function(e){return{type:"EDIT_ENTRY_IN_STATE",payload:e}},v=function(e){return{type:"SAVE_STRIPE_BALANCE_TO_STATE",payload:e}},y=function(){return function(e){return fetch("http://localhost:3000/api/v1/users").then(function(e){return e.json()}).then(function(t){e(function(e){return{type:"SAVE_USERS_TO_STATE",payload:e}}(t))})}},g=function(){return function(e){return fetch("http://localhost:3000/api/v1/plans").then(function(e){return e.json()}).then(function(t){e(function(e){return{type:"SAVE_PLANS_TO_STATE",payload:e}}(t))})}},_=n(347),O=n(341),S=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},n.handleChange=function(e){n.setState(Object(m.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.props.postLogIn(n.state),n.props.getUsers(),n.props.getPlans(),n.props.history.push("/dashboard")},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{className:"flaker-form",onSubmit:this.handleSubmit},r.a.createElement("h1",null,"LogIn"),r.a.createElement(_.a,{type:"text",name:"email",placeholder:"E-Mail",value:this.state.email,onChange:this.handleChange}),r.a.createElement(_.a,{type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange}),r.a.createElement(O.a,null,"LogIn"))}}]),t}(a.Component),j=Object(h.e)(Object(d.b)(null,{postLogIn:function(e){return function(t){return fetch("http://localhost:3000/api/v1/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){e.jwt&&(t(f(e)),t(E(e.jwt)),localStorage.setItem("jwt",e.jwt))})}},getUsers:y,getPlans:g})(S)),T=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",password_confirmation:"",first_name:"",last_name:""},n.handleChange=function(e){n.setState(Object(m.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.props.getUsers(),n.props.postSignUp(n.state),n.props.history.push("/creator-dashboard")},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{className:"flaker-form",onSubmit:this.handleSubmit},r.a.createElement("h1",null,"SignUp"),r.a.createElement(_.a,{type:"text",name:"email",placeholder:"E-Mail",value:this.state.email,onChange:this.handleChange}),r.a.createElement(_.a,{type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange}),r.a.createElement(_.a,{type:"password",name:"password_confirmation",placeholder:"Confirm Password",value:this.state.password_confirmation,onChange:this.handleChange}),r.a.createElement(_.a,{type:"text",name:"first_name",placeholder:"First Name",value:this.state.first_name,onChange:this.handleChange}),r.a.createElement(_.a,{type:"text",name:"last_name",placeholder:"Last Name",value:this.state.last_name,onChange:this.handleChange}),r.a.createElement(O.a,null,"SignUp"))}}]),t}(a.Component),C=Object(h.e)(Object(d.b)(null,{postSignUp:function(e){return function(t){return fetch("http://localhost:3000/api/v1/users",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){e.jwt&&(t(f(e)),t(E(e.jwt)),localStorage.setItem("jwt",e.jwt))})}},getUsers:y})(T)),A=n(17),k=n(44),w=n.n(k),I=n(64),N=n(72),P=n(348),U=function(e,t){return function(n){return fetch("http://localhost:3000/api/v1/entries",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({wager:t.cost,user_id:e.id,plan_id:t.id})}).then(function(e){return e.json()}).then(function(e){n(function(e){return{type:"SAVE_ENTRY_TO_PLAN_STATE",payload:e}}(e))})}},R=n(27),F=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",cost:null,attending:!0,users:[]},n.handleChange=function(e){n.setState(Object(m.a)({},e.target.name,e.target.value))},n.postCharge=Object(I.a)(w.a.mark(function e(){var t,a;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.stripe.createToken({id:n.props.currentUserId});case 2:return t=e.sent,a=t.token,e.next=6,fetch("http://localhost:3000/api/v1/charges",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:100*n.state.cost,id:n.props.currentUserId,stripeToken:a.id})});case 6:case"end":return e.stop()}},e)})),n.handleSubmit=function(e){e.preventDefault();var t=Object(A.a)({creator_id:n.props.currentUserId},n.state),a=n.props.user.all.filter(function(e){return n.state.users.includes(e.id)});n.props.postPlan(t).then(function(e){n.props.postEntry(t,e),function(e){a.map(function(t){return n.props.postInvite(t,e)})}(e),n.postCharge()}).then(function(){return n.props.history.push("/creator-dashboard")})},n.handleSelect=function(e,t){n.setState({users:t.value})},n.userOptions=function(){return n.props.user.all.filter(function(e){return e.id!==n.props.currentUserId}).map(function(e){return{text:e.name,value:e.id}})},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e="https://connect.stripe.com/express/oauth/authorize?response_type=code&client_id=ca_EwmL3WIkrp6NYggrQouufNg2VodKcbhW&scope=read_write&redirect_uri=http://localhost:3000/api/v1/oauth/callback&state=".concat(this.props.currentUserId);return this.props.user.current.stripeId?r.a.createElement("form",{className:"flaker-form",onSubmit:this.handleSubmit},r.a.createElement("h1",null,"Create Plan"),r.a.createElement(_.a,{type:"text",name:"name",value:this.state.name,onChange:this.handleChange}),r.a.createElement(_.a,{labelPosition:"right",type:"number",name:"cost",placeholder:"Amount",value:this.state.cost,onChange:this.handleChange},r.a.createElement(N.a,{basic:!0},"$"),r.a.createElement("input",null),r.a.createElement(N.a,null,".00")),r.a.createElement(P.a,{placeholder:"Users",fluid:!0,multiple:!0,search:!0,selection:!0,options:this.userOptions(),onChange:this.handleSelect}),r.a.createElement(R.CardElement,null),r.a.createElement(O.a,null,"Create Plan")):r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h1",null,"Create Plan"),r.a.createElement("a",{href:e},r.a.createElement(O.a,null,"Stripe")))}}]),t}(a.Component),x=Object(R.injectStripe)(Object(d.b)(function(e){return{user:e.user,currentUserId:e.user.current.id}},{postPlan:function(e){return function(t){return fetch("http://localhost:3000/api/v1/plans",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){return t(function(e){return{type:"SAVE_PLAN_TO_STATE",payload:e}}(e)),t(function(e){return{type:"SAVE_PLAN_TO_USER_STATE",payload:e}}(e)),e})}},postEntry:function(e,t){return function(n){return fetch("http://localhost:3000/api/v1/entries",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({wager:e.cost,attending:e.attending,user_id:e.creator_id,plan_id:t.id})}).then(function(e){return e.json()}).then(function(e){n(function(e){return{type:"SAVE_ENTRY_TO_STATE",payload:e}}(e))})}},postInvite:U})(F)),L=n(25),V=n(349),D=n(54),M=Object(d.b)(function(e){return{user:e.user.current,plan:e.plan.all}})(function(e){var t=e.user.entries.map(function(e){return e.plan_id}),n=e.plan.filter(function(e){return t.includes(e.id)&&!e.end}).map(function(t){var n=e.user.entries.find(function(e){return e.plan_id===t.id});return r.a.createElement(V.a.Item,{key:t.id,value:t.id,active:e.active===t.id,onClick:e.handleClick},n?n.attending?null:r.a.createElement(D.a,{name:"exclamation",color:"red"}):null,t.name)});return r.a.createElement(V.a,{attached:"bottom",tabular:!0},n,r.a.createElement(V.a.Menu,{postion:"right"},r.a.createElement(V.a.Item,{as:L.b,to:"create-plan"},r.a.createElement(D.a,{name:"add"}),"Create Plan")))}),J=n(351),Y=Object(R.injectStripe)(Object(d.b)(function(e){return{user:e.user}},{patchEntry:function(e){return function(t){return fetch("http://localhost:3000/api/v1/entries/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({attending:!0})}).then(function(e){return e.json()}).then(function(e){t(b(e))})}},deleteEntry:function(e){return function(t){return fetch("http://localhost:3000/api/v1/entries/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(e){return e.json()}).then(function(e){t(function(e){return{type:"REMOVE_ENTRY_FROM_STATE",payload:e}}(e))})}}})(function(e){var t=function(){var t=Object(I.a)(w.a.mark(function t(n,a){var r,i;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.stripe.createToken({id:e.user.current.id});case 2:return r=t.sent,i=r.token,t.next=6,fetch("http://localhost:3000/api/v1/charges",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:100*a.cost,id:a.creator_id,stripeToken:i.id})});case 6:return t.next=8,e.patchEntry(n.id);case 8:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),n="https://connect.stripe.com/express/oauth/authorize?response_type=code&client_id=ca_EwmL3WIkrp6NYggrQouufNg2VodKcbhW&scope=read_write&redirect_uri=http://localhost:3000/api/v1/oauth/callback&state=".concat(e.user.current.id);return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{attached:"top"},r.a.createElement("h1",null,e.plan?e.plan.name:null,e.entry&&e.entry.attending?r.a.createElement(D.a,{name:"calendar check",color:"green"}):null),r.a.createElement("h3",null,e.plan?r.a.createElement("i",null,"Creator: ",e.user.all.find(function(t){return t.id===e.plan.creator_id}).name):null),e.entry?e.entry.attending?null:e.user.current.stripeId?r.a.createElement("div",null,r.a.createElement(R.CardElement,null),r.a.createElement(O.a,{basic:!0,color:"green",content:"Accept",icon:"check",label:{basic:!0,color:"green",pointing:"left",content:"$ ".concat(e.plan.cost)},onClick:function(){return t(e.entry,e.plan)}}),r.a.createElement(O.a,{basic:!0,color:"red",content:"Decline",onClick:function(){return e.deleteEntry(e.entry.id)}})):r.a.createElement("a",{href:n},r.a.createElement(O.a,null,"Stripe")):null,r.a.createElement("h3",null,e.plan?"Attending":null),e.plan?function(t){var n=t.entries.filter(function(n){return!0===n.attending&&n.user_id!==e.user.current.id&&t.creator_id!==n.user_id}).map(function(e){return e.user_id}),a=e.user.all.filter(function(e){return n.includes(e.id)}).map(function(e){return r.a.createElement("li",{key:e.id},e.name)});return r.a.createElement("ul",null,a)}(e.plan):null))})),X=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={active:""},n.handleClick=function(e,t){var a=t.value;n.setState({active:a})},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.user.entries.find(function(t){return t.plan_id===e.state.active}),n=this.props.plan.find(function(t){return t.id===e.state.active});return r.a.createElement("div",{className:"flaker-dashboard"},r.a.createElement("h1",{style:{textAlign:"center"}},"Dashboard"),r.a.createElement(R.StripeProvider,{apiKey:"pk_test_FSRfhLIrttg50RdN9s1xt4Xr00mUF63Xd8"},r.a.createElement(R.Elements,null,r.a.createElement(Y,{entry:t,plan:n}))),r.a.createElement(M,{active:this.state.active,handleClick:this.handleClick}))}}]),t}(a.Component),K=Object(d.b)(function(e){return{user:e.user.current,plan:e.plan.all}})(X),W=n(352),B=Object(d.b)(function(e){return{user:e.user.current,plan:e.plan.all}})(function(e){var t=e.plan.filter(function(t){return t.creator_id===e.user.id&&!1===t.end}).map(function(t){return r.a.createElement(V.a.Item,{key:t.id,value:t.id,active:e.active===t.id,onClick:e.handleClick},t.name)});return r.a.createElement(r.a.Fragment,null,e.active?r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a.Item,{onClick:e.handleAddClick},r.a.createElement(D.a,{name:"add"}),"Add User ",e.active?"To ".concat(e.active.name):null),r.a.createElement(V.a.Item,{onClick:e.handleFinishClick},r.a.createElement(D.a,{name:"close"}),"Finished ",e.active?e.active.name:null)):null,t)}),z=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={users:[]},n.handleChange=function(e,t){n.setState({users:t.value})},n.handleSubmit=function(e){e.preventDefault();var t=n.props.plan.find(function(e){return e.id===n.props.active.id}),a=n.props.user.all.filter(function(e){return n.state.users.includes(e.id)});!function(e){a.map(function(t){return n.props.postInvite(t,e)})}(t)},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.active.entries.filter(function(t){return!0===t.attending&&t.user_id!==e.props.user.current.id}).map(function(e){return e.user_id}),n=this.props.user.all.filter(function(e){return!t.includes(e.id)}).filter(function(t){return t.id!==e.props.active.creator_id}).map(function(e){return e.id}),a=this.props.active.entries.map(function(e){return e.user_id}),i=n.filter(function(e){return!a.includes(e)}),c=this.props.user.all.filter(function(e){return i.includes(e.id)}).map(function(e){return{text:e.name,value:e.id}});return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"flaker-select"},r.a.createElement(P.a,{placeholder:"Users",fluid:!0,multiple:!0,search:!0,selection:!0,options:c,onChange:this.handleChange}),r.a.createElement(O.a,null,"Add User")))}}]),t}(a.Component),$=Object(d.b)(function(e){return{user:e.user,plan:e.plan.all}},{postInvite:U})(z),H=function(e){return function(t){return fetch("https://api.stripe.com/v1/balance",{method:"GET",headers:{"Content-Type":"application/json","Stripe-Account":e,Authorization:"Bearer (secret key)"}}).then(function(e){return e.json()}).then(function(e){e.available?t(v(e.available[0].amount)):t(v(0))})}},Q=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={users:[]},n.handleChange=function(e,t){n.setState({users:t.value})},n.postTransfers=function(){var e=Object(I.a)(w.a.mark(function e(t,n){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/api/v1/transfers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:Math.round(100*t),id:n})});case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n.handleSubmit=function(e){e.preventDefault();var t=(n.props.active.pool-.054*n.props.active.pool-.3*n.state.users.length)/n.state.users.length,a=Math.round(100*t)/100;n.props.active.entries.filter(function(e){return n.state.users.includes(e.user_id)}).map(function(e){return n.props.patchPayout(e.id,a)}),n.props.patchPlan(n.props.active.id),n.state.users.map(function(e){return n.postTransfers(a,e)}),n.props.getStripe(n.props.user.current.stripeId),n.props.handleFinishSubmit()},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.active.entries.filter(function(e){return!0===e.attending}).map(function(e){return e.user_id}),n=this.props.user.all.filter(function(e){return t.includes(e.id)}).map(function(t){return{text:t.id===e.props.user.current.id?"".concat(t.name," (Me)"):t.name,value:t.id}});return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"flaker-select"},r.a.createElement(P.a,{placeholder:"Attended",fluid:!0,multiple:!0,search:!0,selection:!0,options:n,onChange:this.handleChange}),r.a.createElement(O.a,null,"Finish")))}}]),t}(a.Component),G=Object(R.injectStripe)(Object(d.b)(function(e){return{user:e.user}},{patchPayout:function(e,t){return function(n){return fetch("http://localhost:3000/api/v1/entries/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({payout:t})}).then(function(e){return e.json()}).then(function(e){n(b(e))})}},patchPlan:function(e){return function(t){return fetch("http://localhost:3000/api/v1/plans/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({end:!0})}).then(function(e){return e.json()}).then(function(e){t(function(e){return{type:"EDIT_PLAN_IN_STATE",payload:e}}(e))})}},getStripe:H})(Q)),q=Object(d.b)(function(e){return{user:e.user}})(function(e){var t=e.active.entries.filter(function(t){return!0===t.attending&&t.user_id!==e.user.current.id}).map(function(e){return e.user_id}),n=e.user.all.filter(function(e){return t.includes(e.id)}),a=e.active.entries.filter(function(t){return!1===t.attending&&t.user_id!==e.user.current.id}).map(function(e){return e.user_id}),i=e.user.all.filter(function(e){return a.includes(e.id)}),c=n.map(function(e){return r.a.createElement("li",{key:e.id},e.name)}),l=i.map(function(e){return r.a.createElement("li",{key:e.id},e.name)});return r.a.createElement(J.a,null,r.a.createElement("h1",null,e.active.name),r.a.createElement("h3",null,"Attending"),r.a.createElement("ul",null,c),r.a.createElement("h3",null,"Pending"),r.a.createElement("ul",null,l),e.add?r.a.createElement($,{active:e.active}):null,e.finish?r.a.createElement(R.StripeProvider,{apiKey:"pk_test_FSRfhLIrttg50RdN9s1xt4Xr00mUF63Xd8"},r.a.createElement(R.Elements,null,r.a.createElement(G,{active:e.active,handleFinishSubmit:e.handleFinishSubmit}))):null)}),Z=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={active:"",add:!1,finish:!1},n.handleClick=function(e,t){var a=t.value;n.setState({active:a,add:!1,finish:!1})},n.handleAddClick=function(){n.setState({add:!n.state.add,finish:!1})},n.handleFinishClick=function(){n.setState({add:!1,finish:!n.state.finish})},n.handleFinishSubmit=function(){n.setState({active:""})},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.plan.find(function(t){return t.id===e.state.active});return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{style:{textAlign:"center"}},"Creator Dashboard"),r.a.createElement(W.a,null,r.a.createElement(W.a.Column,{width:3},r.a.createElement(V.a,{fluid:!0,vertical:!0,tabular:!0},r.a.createElement(V.a.Item,{as:L.b,to:"create-plan"},r.a.createElement(D.a,{name:"add"}),"Create Plan"),r.a.createElement(B,{active:t,handleClick:this.handleClick,handleAddClick:this.handleAddClick,handleFinishClick:this.handleFinishClick}))),r.a.createElement(W.a.Column,{stretched:!0,width:12},t?r.a.createElement(q,{active:t,add:this.state.add,finish:this.state.finish,handleFinishSubmit:this.handleFinishSubmit}):null)))}}]),t}(a.Component),ee=Object(d.b)(function(e){return{plan:e.plan.all}})(Z),te=Object(d.b)(function(e){return{user:e.user.current,plan:e.plan.all}})(function(e){var t=e.plan.filter(function(t){return t.creator_id===e.user.id&&!0===t.end}).map(function(t){return r.a.createElement(V.a.Item,{key:t.id,value:t.id,active:e.active===t.id,onClick:e.handleClick},t.name)});return r.a.createElement(r.a.Fragment,null,t)}),ne=Object(d.b)(function(e){return{user:e.user}})(function(e){var t=e.active.entries.filter(function(e){return!0===e.attending}),n=t.filter(function(e){return e.payout}),a=n[0]?n[0].payout:0,i=t.map(function(t){if(t.payout){var n=e.user.all.find(function(e){return t.user_id===e.id});return r.a.createElement("li",{key:n.id},e.active.creator_id===n.id?"".concat(n.name," (Creator)"):n.name," ",r.a.createElement(D.a,{name:"check",color:"green"}))}var a=e.user.all.find(function(e){return t.user_id===e.id});return r.a.createElement("li",{key:a.id},r.a.createElement("strike",{className:"flaker"},e.active.creator_id===a.id?"".concat(a.name," (Creator)"):a.name))});return r.a.createElement(J.a,null,r.a.createElement("h1",null,e.active.name),r.a.createElement("h3",null,"Attendees: ",t.filter(function(e){return e.payout}).length),r.a.createElement("h3",null,"Payout: $ ",a),r.a.createElement("h3",null,"Attendance List"),r.a.createElement("ul",null,i))}),ae=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={active:""},n.handleClick=function(e,t){var a=t.value;n.setState({active:a})},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.plan.find(function(t){return t.id===e.state.active});return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{style:{textAlign:"center"}},"End Dashboard"),r.a.createElement(W.a,null,r.a.createElement(W.a.Column,{width:3},r.a.createElement(V.a,{fluid:!0,vertical:!0,tabular:!0},r.a.createElement(te,{active:this.state.active,handleClick:this.handleClick}))),r.a.createElement(W.a.Column,{stretched:!0,width:12},t?r.a.createElement(ne,{active:t}):null)))}}]),t}(a.Component),re=Object(d.b)(function(e){return{plan:e.plan.all}})(ae),ie=function(){return r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"/login",component:j}),r.a.createElement(h.a,{path:"/signup",component:C}),r.a.createElement(h.a,{path:"/creator-dashboard",component:ee}),r.a.createElement(h.a,{path:"/end-dashboard",component:re}),r.a.createElement(h.a,{path:"/dashboard",component:K}),r.a.createElement(R.StripeProvider,{apiKey:"pk_test_FSRfhLIrttg50RdN9s1xt4Xr00mUF63Xd8"},r.a.createElement(R.Elements,null,r.a.createElement(h.a,{path:"/create-plan",component:x}))))},ce=Object(d.b)(function(e){return{user:e.user,currentUser:e.user.all.find(function(t){return t.id===e.user.current.id})}},{removeUserFromState:function(){return{type:"REMOVE_USER_FROM_STATE"}}})(function(e){return e.user.current.token?r.a.createElement(V.a,{pointing:!0,secondary:!0},r.a.createElement(V.a.Item,{header:!0},r.a.createElement("strike",null,e.currentUser?e.currentUser.name:"Flaker")),r.a.createElement(V.a.Item,{header:!0,as:L.b,to:"/creator-dashboard",children:"Creator Dashboard"}),r.a.createElement(V.a.Item,{header:!0,as:L.b,to:"/dashboard",children:"Dashboard"}),r.a.createElement(V.a.Item,{header:!0,as:L.b,to:"/end-dashboard",children:"End Dashboard"}),r.a.createElement(V.a.Item,{header:!0,as:L.b,to:"/create-plan",children:"Create Plan"}),r.a.createElement(V.a.Item,{header:!0,as:L.b,to:"/login",position:"right",onClick:e.removeUserFromState},"Logout")):r.a.createElement(V.a,{pointing:!0,secondary:!0},r.a.createElement(V.a.Item,{header:!0},r.a.createElement("strike",null,"Flaker")),r.a.createElement(V.a.Item,{header:!0,as:L.b,to:"/signup",children:"Sign Up"}),r.a.createElement(V.a.Item,{header:!0,as:L.b,to:"/login",position:"right",children:"Login"}))}),le=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ce,null),this.props.user.token?r.a.createElement(ie,null):r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"/login",component:j}),r.a.createElement(h.a,{path:"/signup",component:C})))}},{key:"componentDidMount",value:function(){var e=this;this.props.getPlans(),this.props.getUsers(),localStorage.getItem("jwt")&&this.props.getCurrentUser().then(function(){return e.props.getStripe(e.props.user.stripeId)})}}]),t}(a.Component),oe=Object(d.b)(function(e){return{user:e.user.current}},{getCurrentUser:function(){return function(e){return fetch("http://localhost:3000/api/v1/current_user",{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:localStorage.getItem("jwt")}}).then(function(e){return e.json()}).then(function(t){e(function(e){return{type:"SET_USER_TO_STATE",payload:e}}(t))})}},getUsers:y,getPlans:g,getStripe:H})(le);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ue=n(53),se=n(181),pe=(n(339),n(66)),de={all:[],current:{id:0,stripeId:"",balance:0,token:"",entries:[],plans:[]}},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_USER_TO_STATE":return Object(A.a)({},e,{current:Object(A.a)({},e.current,{id:t.payload.user.id,stripeId:t.payload.user.stripe_id,entries:t.payload.entries,plans:t.payload.plans})});case"SAVE_TOKEN_TO_STATE":return Object(A.a)({},e,{current:Object(A.a)({},e.current,{token:t.payload})});case"SET_USER_TO_STATE":return Object(A.a)({},e,{current:{id:t.payload.user.id,stripeId:t.payload.user.stripe_id,entries:t.payload.entries,plans:t.payload.plans,token:localStorage.getItem("jwt")}});case"REMOVE_USER_FROM_STATE":return localStorage.clear(),de;case"SAVE_USERS_TO_STATE":return Object(A.a)({},e,{all:t.payload});case"SAVE_ENTRY_TO_STATE":return Object(A.a)({},e,{current:Object(A.a)({},e.current,{entries:[].concat(Object(pe.a)(e.current.entries),[t.payload])})});case"EDIT_ENTRY_IN_STATE":var n=e.current.entries.map(function(e){return e.id===t.payload.id?Object(A.a)({},e,t.payload):e});return Object(A.a)({},e,{current:Object(A.a)({},e.current,{entries:n})});case"REMOVE_ENTRY_FROM_STATE":var a=e.current.entries.filter(function(e){return e.id!==t.payload.id});return Object(A.a)({},e,{current:Object(A.a)({},e.current,{entries:a})});case"SAVE_PLAN_TO_USER_STATE":return Object(A.a)({},e,{current:Object(A.a)({},e.current,{plans:[].concat(Object(pe.a)(e.current.plans),[t.payload])})});case"SAVE_STRIPE_BALANCE_TO_STATE":return Object(A.a)({},e,{current:Object(A.a)({},e.current,{balance:t.payload})});default:return e}},me={all:[]},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_PLAN_TO_STATE":return{all:[].concat(Object(pe.a)(e.all),[t.payload])};case"SAVE_PLANS_TO_STATE":return{all:t.payload};case"SAVE_ENTRY_TO_PLAN_STATE":var n=e.all.find(function(e){return e.id===t.payload.plan_id}),a=[].concat(Object(pe.a)(n.entries),[t.payload]);return{all:e.all.map(function(e){return e.id===t.payload.plan_id?Object(A.a)({},e,{entries:a}):e})};case"EDIT_PLAN_IN_STATE":return{all:e.all.map(function(e){return e.id===t.payload.id?t.payload:e})};default:return e}},Ee=Object(ue.c)({user:he,plan:fe}),be=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ue.d,ve=Object(ue.e)(Ee,be(Object(ue.a)(se.a)));c.a.render(r.a.createElement(L.a,null,r.a.createElement(d.a,{store:ve},r.a.createElement(oe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[190,1,2]]]);
//# sourceMappingURL=main.3f68013c.chunk.js.map